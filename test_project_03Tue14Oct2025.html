<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project Analysis Report - test_project</title>
<style>
  :root{
    --bg: oklch(0.96 0.01 250);
    --surface: oklch(1 0.01 250);
    --surface-2: oklch(0.98 0.01 250);
    --text: oklch(0.15 0.02 250);
    --muted: oklch(0.45 0.02 250);
    --border: oklch(0.85 0.02 250);
    --accent: oklch(0.65 0.08 240);
    --text-primary: oklch(0.15 0.02 250);
    --text-secondary: oklch(0.45 0.02 250);
    --text-on-surface: oklch(0.15 0.02 250);
    --text-on-surface-2: oklch(0.15 0.02 250);
    --text-on-accent: oklch(1 0 0);
    --text-interactive: oklch(0.35 0.02 250);
    --text-interactive-hover: oklch(1 0 0);
    --success: oklch(73% 0.15 166);
    --warning: oklch(65% 0.12 75);
    --danger: oklch(58% 0.18 25);
    --temp-cold: oklch(38% 0.19 265);
    --temp-cool: oklch(63% 0.23 255);
    --temp-neutral: oklch(73% 0.15 166);
    --temp-warm: oklch(72% 0.17 75);
    --temp-hot: oklch(62% 0.26 25);
    --temp-very-hot: oklch(58% 0.26 25);
    --github-none: oklch(13% 0.01 260);
    --github-low: oklch(27% 0.08 152);
    --github-med: oklch(44% 0.13 155);
    --github-high: oklch(65% 0.18 150);
    --github-max: oklch(75% 0.20 145);
    --plasma-min: oklch(25% 0.14 300);
    --plasma-low: oklch(48% 0.10 240);
    --plasma-med: oklch(70% 0.16 155);
    --plasma-high: oklch(95% 0.16 100);
    --plasma-max: oklch(98% 0.08 105);
    --priority-p0: oklch(58% 0.18 25);
    --priority-p1: oklch(65% 0.12 75);
    --priority-p2: oklch(60% 0.15 255);
    --timeline-purple: oklch(60% 0.18 290);
    --timeline-orange: oklch(70% 0.18 40);
    --white: oklch(100% 0 0);
    --black: oklch(0% 0 0);
    --white-15: oklch(100% 0 0 / 0.15);
    --white-20: oklch(100% 0 0 / 0.2);
    --white-30: oklch(100% 0 0 / 0.3);
    --white-50: oklch(100% 0 0 / 0.5);
    --white-60: oklch(100% 0 0 / 0.6);
    --white-80: oklch(100% 0 0 / 0.8);
    --black-30: oklch(0% 0 0 / 0.3);
    --black-40: oklch(0% 0 0 / 0.4);
    --black-50: oklch(0% 0 0 / 0.5);
    --black-60: oklch(0% 0 0 / 0.6);
    --black-70: oklch(0% 0 0 / 0.7);
    --black-80: oklch(0% 0 0 / 0.8);
    --black-90: oklch(0% 0 0 / 0.9);
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 24px;
    --space-6: 32px;
    --space-7: 48px;
    --text-xs: 11px;
    --text-sm: 12px;
    --text-base: 13px;
    --text-md: 14px;
    --text-lg: 16px;
    --text-xl: 20px;
    --text-2xl: 24px;
    --radius-sm: 3px;
    --radius-md: 6px;
    --radius-lg: 8px;
    --radius-xl: 12px;
    --radius: var(--radius-xl);
    --ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  }
  html, body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:var(--ui);-webkit-font-smoothing:antialiased;line-height:1.6}
  @keyframes shine{0%{box-shadow:0 0 0 0 var(--accent)}50%{box-shadow:0 0 40px 15px var(--accent),inset 0 0 20px 5px var(--accent)}100%{box-shadow:0 0 0 0 var(--accent)}}
  .shine-animation{animation:shine 2s ease-in-out}
  .p-1{padding:var(--space-1)!important}
  .p-2{padding:var(--space-2)!important}
  .p-3{padding:var(--space-3)!important}
  .p-4{padding:var(--space-4)!important}
  .p-5{padding:var(--space-5)!important}
  .p-6{padding:var(--space-6)!important}
  .p-7{padding:var(--space-7)!important}
  .m-1{margin:var(--space-1)!important}
  .m-2{margin:var(--space-2)!important}
  .m-3{margin:var(--space-3)!important}
  .m-4{margin:var(--space-4)!important}
  .m-5{margin:var(--space-5)!important}
  .m-6{margin:var(--space-6)!important}
  .m-7{margin:var(--space-7)!important}
  .gap-1{gap:var(--space-1)!important}
  .gap-2{gap:var(--space-2)!important}
  .gap-3{gap:var(--space-3)!important}
  .gap-4{gap:var(--space-4)!important}
  .text-xs{font-size:var(--text-xs)!important}
  .text-sm{font-size:var(--text-sm)!important}
  .text-base{font-size:var(--text-base)!important}
  .text-md{font-size:var(--text-md)!important}
  .text-lg{font-size:var(--text-lg)!important}
  .text-xl{font-size:var(--text-xl)!important}
  .text-2xl{font-size:var(--text-2xl)!important}
  .radius-sm{border-radius:var(--radius-sm)!important}
  .radius-md{border-radius:var(--radius-md)!important}
  .radius-lg{border-radius:var(--radius-lg)!important}
  .radius-xl{border-radius:var(--radius-xl)!important}
  .wrap{max-width:900px;margin:24px auto;padding:0 16px 72px}
  h1{font-size:clamp(24px,3vw,32px);margin:0;font-weight:700}
  h2{font-size:clamp(20px,2.5vw,26px);margin:32px 0 16px;font-weight:600}
  h3{font-size:18px;margin:24px 0 12px;font-weight:600}
  .lead{color:var(--muted);margin:8px 0 0;font-size:clamp(16px,2vw,18px)}
  .grid{display:grid;gap:16px}
  .cols-2{grid-template-columns:repeat(2,1fr)}
  .cols-3{grid-template-columns:repeat(3,1fr)}
  .cols-4{grid-template-columns:repeat(4,1fr)}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:12px;margin-bottom:24px}
  .card h2{margin:0 0 12px;font-size:20px}
  .card h3{margin:16px 0 8px;font-size:16px}
  .table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:8px;background:var(--surface)}
  .table th,.table td{padding:12px;text-align:left;vertical-align:top;border-bottom:1px solid var(--border)}
  .table thead th{background:var(--surface-2);font-weight:600}
  .table tbody tr:last-child td{border-bottom:none}
  .mono{font-family:var(--mono);font-size:0.9em;background:var(--surface-2);padding:2px 6px;border-radius:4px}
  .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--surface-2);font-size:12px;color:var(--text);font-weight:500;border:1px solid var(--border)}
  .small{font-size:14px;color:var(--muted)}
  .metric{text-align:center;padding:16px}
  .metric-value{font-size:2rem;font-weight:700;font-family:var(--mono);display:block}
  .metric-label{color:var(--muted);font-size:14px}
  .callout{padding:12px 16px;border-radius:6px;background:var(--surface-2);margin-bottom:12px}
  .status-success{color:var(--success)}
  .status-warning{color:var(--warning)}
  .status-danger{color:var(--danger)}
  details{margin:16px 0}
  summary{cursor:pointer;padding:12px;background:var(--surface-2);border-radius:8px;font-weight:600;user-select:none}
  summary:hover{background:var(--border)}
  details[open] summary{margin-bottom:12px}
  :root[data-theme="dark"]{
    --bg: oklch(11% 0.006 264);
    --surface: oklch(15% 0.008 264);
    --surface-2: oklch(20% 0.01 264);
    --text: oklch(95% 0.008 264);
    --muted: oklch(60% 0.012 264);
    --border: oklch(26% 0.011 264);
    --accent: oklch(65% 0.16 240);
    --text-primary: oklch(95% 0.008 264);
    --text-secondary: oklch(65% 0.012 264);
    --text-on-surface: oklch(95% 0.008 264);
    --text-on-surface-2: oklch(95% 0.008 264);
    --text-on-accent: oklch(1 0 0);
    --text-interactive: oklch(75% 0.012 264);
    --text-interactive-hover: oklch(1 0 0);
  }
  :root[data-theme="dark"] body{background:var(--bg);color:var(--text)}
  :root[data-theme="dark"] .card{background:var(--surface);border-color:var(--border)}
  :root[data-theme="dark"] .table{background:var(--surface);border-color:var(--border)}
  :root[data-theme="dark"] .table thead th{background:var(--surface-2)}
  :root[data-theme="dark"] .table tbody tr:nth-child(even){background:var(--surface-2)}
  :root[data-theme="dark"] .mono{background:var(--surface-2);color:oklch(85% 0.08 240)}
  :root[data-theme="dark"] .pill{background:var(--surface-2);border-color:var(--border);color:var(--muted)}
  :root[data-theme="dark"] summary:hover{background:var(--surface-2)}
  #settings-root{position:fixed;top:20px;right:20px;z-index:10000}
  #settings-toggle{width:60px;height:60px;border-radius:50%;background:var(--surface);border:2px solid var(--accent);box-shadow:0 4px 12px rgba(0,0,0,0.15);cursor:pointer;font-size:24px;transition:all 0.2s;display:flex;align-items:center;justify-content:center}
  #settings-toggle:hover{transform:scale(1.1);box-shadow:0 6px 16px rgba(0,0,0,0.2)}
  #settings-panel{position:absolute;top:70px;right:0;width:300px;background:var(--surface);border:2px solid var(--accent);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.2);display:none}
  #settings-panel.open{display:block;animation:slideDown 0.3s ease-out}
  @keyframes slideDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
  @keyframes slideIn{from{opacity:0;transform:translateX(100px)}to{opacity:1;transform:translateX(0)}}
  @keyframes slideOut{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(100px)}}
  .settings-header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid var(--border);font-weight:700;color:var(--text-primary)}
  .settings-close{width:28px;height:28px;border-radius:50%;border:none;background:var(--surface-2);cursor:pointer;font-size:14px;transition:all 0.2s;color:var(--text-interactive)}
  .settings-close:hover{background:var(--accent);color:var(--text-on-accent)}
  .settings-section{padding:16px;border-bottom:1px solid var(--border)}
  .settings-section:last-child{border-bottom:none}
  .settings-section-title{font-size:13px;font-weight:700;margin-bottom:12px;color:var(--text-primary)}
  .schema-btn{width:100%;padding:10px 12px;margin-bottom:4px;background:var(--surface-2);border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all 0.2s;text-align:left;font-size:13px;font-weight:600;display:flex;justify-content:space-between;align-items:center;color:var(--text-interactive)}
  .schema-btn:hover{background:var(--accent);color:var(--text-interactive-hover)}
  .schema-btn.active{border-color:var(--accent);color:var(--text-primary)}
  .schema-swatches{display:flex;gap:4px}
  .schema-swatch{width:16px;height:16px;border-radius:3px;border:1px solid rgba(255,255,255,0.2)}
  .settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .settings-grid button{padding:10px;background:var(--surface-2);border:2px solid transparent;border-radius:8px;cursor:pointer;font-size:13px;font-weight:600;transition:all 0.2s;color:var(--text-interactive)}
  .settings-grid button:hover{background:var(--accent);color:var(--text-interactive-hover)}
  .settings-grid button.active{border-color:var(--accent);color:var(--text-primary)}
  .summary-grid{display:grid;grid-template-columns:2fr 1fr;gap:24px}
  @media (max-width: 768px){.cols-2,.cols-3,.cols-4{grid-template-columns:1fr}.wrap{margin:16px auto;padding:0 12px 48px}.summary-grid{grid-template-columns:1fr}}
  @media (max-width: 480px){.wrap{padding:0 8px 36px}.metric{padding:12px 8px}.metric-value{font-size:1.5rem}}
</style>
<script src='https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js'></script>
</head>
<body>
<div class="main-container" style="max-width:1400px;margin:0 auto;padding:0 20px;">
<div id="settings-root">
  <button id="settings-toggle" onclick="toggleSettings()">⚙️</button>
  <div id="settings-panel">
    <div class="settings-header">
      <span>⚙️ Settings</span>
      <button class="settings-close" onclick="closeSettings()">✕</button>
    </div>
    <div class="settings-section">
      <div class="settings-section-title">🎨 Color Schema</div>
      <button class="schema-btn" id="schema-temp" onclick="switchColorSchema('temperature')">
        <span>🌡️ Temperature</span>
        <div class="schema-swatches">
          <div class="schema-swatch" style="background:oklch(38% 0.19 265)"></div>
          <div class="schema-swatch" style="background:oklch(73% 0.15 166)"></div>
          <div class="schema-swatch" style="background:oklch(72% 0.17 75)"></div>
          <div class="schema-swatch" style="background:oklch(62% 0.26 25)"></div>
        </div>
      </button>
      <button class="schema-btn" id="schema-github" onclick="switchColorSchema('github')">
        <span>🐙 GitHub</span>
        <div class="schema-swatches">
          <div class="schema-swatch" style="background:oklch(13% 0.01 260)"></div>
          <div class="schema-swatch" style="background:oklch(27% 0.08 152)"></div>
          <div class="schema-swatch" style="background:oklch(44% 0.13 155)"></div>
          <div class="schema-swatch" style="background:oklch(75% 0.20 145)"></div>
        </div>
      </button>
      <button class="schema-btn" id="schema-plasma" onclick="switchColorSchema('plasma')">
        <span>🔥 Plasma</span>
        <div class="schema-swatches">
          <div class="schema-swatch" style="background:oklch(25% 0.14 300)"></div>
          <div class="schema-swatch" style="background:oklch(48% 0.10 240)"></div>
          <div class="schema-swatch" style="background:oklch(70% 0.16 155)"></div>
          <div class="schema-swatch" style="background:oklch(95% 0.16 100)"></div>
        </div>
      </button>
    </div>
    <div class="settings-section">
      <div class="settings-section-title">🌐 Language & Theme</div>
      <div class="settings-grid">
        <button id="lang-en" onclick="selectLang('en')">🌐 EN</button>
        <button id="lang-pt" onclick="selectLang('pt')">🌐 PT</button>
        <button id="theme-light" onclick="selectTheme('light')">☀️ Light</button>
        <button id="theme-dark" onclick="selectTheme('dark')">🌙 Dark</button>
      </div>
    </div>
  </div>
</div>
<div class="wrap">
  <header style='text-align:center;padding:40px 0 32px;border-bottom:2px solid var(--border);margin-bottom:32px'>
    <div style="font-size:clamp(32px,4vw,48px);font-weight:800;margin-bottom:16px;line-height:1.2;color:var(--text)">test_project</div>
    <div style="font-size:16px;color:var(--muted);margin-bottom:8px" data-en="Project Analysis Report" data-pt="Relatório de Análise de Projeto">Project Analysis Report</div>
    <div style="font-size:14px;color:var(--muted);font-family:var(--mono)">
      <span data-en="Generated" data-pt="Gerado">Generated</span> 2025-10-14 03:06:32
    </div>
  </header>
  <nav style='background:linear-gradient(135deg, var(--surface-2), var(--surface));border:1px solid var(--border);border-radius:12px;padding:24px;margin-bottom:32px;'>
    <h2 style='margin:0 0 16px 0;font-size:20px;font-weight:600;color:var(--text);display:flex;align-items:center;gap:8px;'>
      📚 <span data-en='MEGALITH INDEX' data-pt='ÍNDICE DO MEGALITH'>MEGALITH INDEX</span>
      <span style='background:var(--accent);color:white;font-size:12px;padding:4px 8px;border-radius:12px;font-weight:500;'>LIGHTHOUSE NAVIGATION</span>
    </h2>
    <div style='display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;'>
      <div class='index-section' style='background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px;'>
        <h3 style='margin:0 0 8px 0;font-size:16px;font-weight:600;color:var(--accent);'>🎯 Chapter 1</h3>
        <div style='font-weight:500;color:var(--text);margin-bottom:4px;'>Project Overview</div>
        <div style='font-size:13px;color:var(--muted);'>Score: 100/100 • Grade: A - Excellent</div>
        <div style='margin-top:8px;'>
          <button onclick='scrollToSection("hero")' style='background:var(--accent);color:white;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;'>Jump to ↓</button>
        </div>
      </div>
      <div class='index-section' style='background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px;'>
        <h3 style='margin:0 0 8px 0;font-size:16px;font-weight:600;color:#10b981;'>🚀 Chapter 2</h3>
        <div style='font-weight:500;color:var(--text);margin-bottom:4px;'>ULTRATHINK Dependency Maps</div>
        <div style='font-size:13px;color:var(--muted);'>5 Smart Diagrams • Risk Analysis</div>
        <div style='margin-top:8px;'>
          <button onclick='scrollToSection("ultrathink")' style='background:#10b981;color:white;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;'>Jump to ↓</button>
        </div>
      </div>
      <div class='index-section' style='background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px;'>
        <h3 style='margin:0 0 8px 0;font-size:16px;font-weight:600;color:#8b5cf6;'>📁 Chapter 3</h3>
        <div style='font-weight:500;color:var(--text);margin-bottom:4px;'>Directory Structure</div>
        <div style='font-size:13px;color:var(--muted);'>0 directories analyzed</div>
        <div style='margin-top:8px;'>
          <button onclick='scrollToSection("directories")' style='background:#8b5cf6;color:white;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;'>Jump to ↓</button>
        </div>
      </div>
      <div class='index-section' style='background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px;'>
        <h3 style='margin:0 0 8px 0;font-size:16px;font-weight:600;color:#f59e0b;'>🛠️ Chapter 4</h3>
        <div style='font-weight:500;color:var(--text);margin-bottom:4px;'>Technology Stack</div>
        <div style='font-size:13px;color:var(--muted);'>Frameworks & dependencies</div>
        <div style='margin-top:8px;'>
          <button onclick='scrollToSection("tech-stack")' style='background:#f59e0b;color:white;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;'>Jump to ↓</button>
        </div>
      </div>
      <div class='index-section' style='background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px;'>
        <h3 style='margin:0 0 8px 0;font-size:16px;font-weight:600;color:#ef4444;'>⚡ Chapter 5</h3>
        <div style='font-weight:500;color:var(--text);margin-bottom:4px;'>Critical Issues & Action Plan</div>
        <div style='font-size:13px;color:var(--muted);'>Priority fixes needed</div>
        <div style='margin-top:8px;'>
          <button onclick='scrollToSection("action-plan")' style='background:#ef4444;color:white;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;'>Jump to ↓</button>
        </div>
      </div>
    </div>
    <div style='margin-top:16px;text-align:center;'>
      <div style='font-size:12px;color:var(--muted);margin-bottom:4px;'>
        📖 <span data-en='Total Chapters: 5 • Estimated Reading: 8-12 minutes' data-pt='Total de Capítulos: 5 • Leitura Estimada: 8-12 minutos'>Total Chapters: 5 • Estimated Reading: 8-12 minutes</span>
      </div>
      <div style='display:flex;justify-content:center;gap:8px;'>
        <button onclick='expandAllSections()' style='background:var(--surface-2);color:var(--text);border:1px solid var(--border);padding:6px 12px;border-radius:6px;font-size:11px;cursor:pointer;'>📖 Expand All</button>
        <button onclick='collapseAllSections()' style='background:var(--surface-2);color:var(--text);border:1px solid var(--border);padding:6px 12px;border-radius:6px;font-size:11px;cursor:pointer;'>📕 Collapse All</button>
      </div>
    </div>
  </nav>
  <section class="card" style="padding:24px">
    <div class="summary-grid">
      <!-- Left: Metrics Grid (Compact 2x2) -->
      <div class="grid cols-2" style="gap:12px">
          <div style="background:var(--surface-2);padding:16px;border-radius:8px;text-align:center">
            <div style="font-size:36px;font-weight:800;color:var(--success);font-family:var(--mono)">100.0</div>
            <div style="font-size:12px;color:var(--muted);margin-top:4px" data-en="Health Score" data-pt="Pontuação">Health Score</div>
          </div>
          <div style="background:var(--surface-2);padding:16px;border-radius:8px;text-align:center">
            <div style="font-size:36px;font-weight:800;color:var(--accent);font-family:var(--mono)">1</div>
            <div style="font-size:12px;color:var(--muted);margin-top:4px" data-en="Files" data-pt="Arquivos">Files</div>
          </div>
          <div style="background:var(--surface-2);padding:16px;border-radius:8px;text-align:center">
            <div style="font-size:28px;font-weight:700;color:var(--text);font-family:var(--mono)">0</div>
            <div style="font-size:12px;color:var(--muted);margin-top:4px" data-en="Directories" data-pt="Diretórios">Directories</div>
          </div>
          <div style="background:var(--surface-2);padding:16px;border-radius:8px;text-align:center">
            <div style="font-size:28px;font-weight:700;color:var(--text);font-family:var(--mono)">0.4s</div>
            <div style="font-size:12px;color:var(--muted);margin-top:4px" data-en="Analysis" data-pt="Análise">Analysis</div>
          </div>
        </div>
      <!-- Right: Grade, Status & Purpose -->
      <div style="background:var(--surface-2);padding:12px;border-radius:8px;border-left:4px solid var(--success)">
        <div style="font-size:24px;font-weight:700;margin-bottom:12px;color:var(--success)">A - Excellent</div>
        <div style="font-size:14px;color:var(--muted);margin-bottom:16px" data-en="Excellent project health" data-pt="Saúde excelente">Excellent project health</div>
        <div style="padding-top:12px;border-top:1px solid var(--border)">
          <div style="font-size:11px;font-weight:600;color:var(--accent);margin-bottom:6px" data-en="PROJECT PURPOSE" data-pt="PROPÓSITO">PROJECT PURPOSE</div>
          <div style="font-size:13px;line-height:1.5;color:var(--text)">Software development project</div>
        </div>
      </div>
    </div>
  </section>

        <section class="card" id="section-dependency-map" style="border:1px solid var(--border);border-radius:8px;padding:12px;">
          <summary style="cursor:pointer;font-size:18px;font-weight:600;margin-bottom:16px;user-select:none" data-en="🚀 ULTRATHINK DEPENDENCY MAP: 5 Smart Diagrams + Real Code Analysis" data-pt="🚀 MAPA DE DEPENDÊNCIAS ULTRATHINK: 5 Diagramas Inteligentes + Análise de Código Real">🚀 ULTRATHINK DEPENDENCY MAP: 5 Smart Diagrams + Real Code Analysis</summary>

          <!-- PRIMARY STATISTICS -->
          <div class="dependency-stats" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px;">
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.6rem;font-weight:800;color:var(--accent);margin-bottom:4px;">1</div>
              <div style="color:var(--muted);font-size:0.85rem;">Files Analyzed</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.6rem;font-weight:800;color:var(--warning);margin-bottom:4px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">Direct Dependencies</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.6rem;font-weight:800;color:var(--success);margin-bottom:4px;">5</div>
              <div style="color:var(--muted);font-size:0.85rem;">Smart Diagrams</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.6rem;font-weight:800;color:var(--danger);margin-bottom:4px;">ULTRATHINK</div>
              <div style="color:var(--muted);font-size:0.85rem;">Analysis Engine</div>
            </div>
          </div>

          <!-- 🔫 SNIPER GUN ENTITY ANALYSIS -->
          <div class="sniper-stats" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:24px;">
            <div class="stat-card" style="background:linear-gradient(135deg, rgba(99,102,241,0.1) 0%, rgba(139,92,246,0.1) 100%);padding:16px;border-radius:8px;text-align:center;border:1px solid var(--accent);">
              <div style="font-size:1.6rem;font-weight:700;color:var(--accent);margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">🔫 Total Entities</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#8b5cf6;margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">Functions</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#10b981;margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">Classes</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#f59e0b;margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">React Components</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#ef4444;margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">API Endpoints</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#8b4513;margin-bottom:6px;">0</div>
              <div style="color:var(--muted);font-size:0.85rem;">🌊 Ripple Score</div>
            </div>
            <div class="stat-card" style="background:var(--surface-2);padding:10px;border-radius:8px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:#6366f1;margin-bottom:6px;">1</div>
              <div style="color:var(--muted);font-size:0.85rem;">Lines of Code</div>
            </div>
          </div>

          <!-- 🌊 RIPPLE EFFECT ANALYSIS -->
          <div class="ripple-analysis" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:24px;">
            <h4 style="margin-bottom:16px;color:var(--text);display:flex;align-items:center;gap:8px;">
              🌊 <span data-en="Ripple Effect Analysis" data-pt="Análise de Efeito Cascata">Ripple Effect Analysis</span>
            </h4>
            
        <div style="overflow-x:auto;">
            <table style="width:100%;border-collapse:collapse;font-size:0.85rem;">
                <thead>
                    <tr style="background:var(--surface-3);border-bottom:2px solid var(--border);">
                        <th style="text-align:left;padding:8px 12px;color:var(--text);font-weight:600;">File</th>
                        <th style="text-align:center;padding:8px 12px;color:var(--text);font-weight:600;">Risk</th>
                        <th style="text-align:right;padding:8px 12px;color:var(--text);font-weight:600;">Impact</th>
                        <th style="text-align:right;padding:8px 12px;color:var(--text);font-weight:600;">Files Affected</th>
                        <th style="text-align:right;padding:8px 12px;color:var(--text);font-weight:600;">Dependents</th>
                    </tr>
                </thead>
                <tbody>
        
                <tr style="border-bottom:1px solid var(--border);">
                    <td style="padding:10px 12px;">
                        <div style="font-weight:500;color:var(--text);margin-bottom:2px;" title="/private/tmp/test_project/test.js">test.js</div>
                        <div style="font-size:0.75rem;color:var(--text-secondary);">No dependents</div>
                    </td>
                    <td style="text-align:center;padding:10px 12px;">
                        <span style="font-size:1rem;" title="Low">⚪</span>
                    </td>
                    <td style="text-align:right;padding:10px 12px;">
                        <span style="font-weight:600;color:var(--text);">0</span>
                        <span style="font-size:0.75rem;color:var(--text-secondary);margin-left:4px;">(0%)</span>
                    </td>
                    <td style="text-align:right;padding:10px 12px;color:var(--text);">0</td>
                    <td style="text-align:right;padding:10px 12px;color:var(--text);">0</td>
                </tr>
            
                </tbody>
            </table>
        </div>
        <div style="margin-top:12px;padding:8px 12px;background:var(--surface-3);border-radius:6px;font-size:0.75rem;color:var(--text-secondary);">
            💡 <strong>Tip:</strong> Files with higher impact scores require more careful testing when modified.
        </div>
        
          </div>

          <!-- SMART DIAGRAMS -->
          <div class="smart-diagrams" style="margin-bottom:32px;">
            <h3 style="font-size:20px;font-weight:600;color:var(--text);margin:0 0 20px 0;">Smart Diagrams</h3>
            <div class="diagram-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;">
              
              <div class="diagram-card" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;cursor:pointer;">
                <div class="mermaid-diagram" id="mermaid-ultrathink-main-core" style="background:#0a0a0a;border:1px solid #3f3f46;border-radius:6px;padding:20px;min-height:300px;">
                  <div class="mermaid">flowchart TD</div>
                </div>
              </div>

              <div class="diagram-card" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;cursor:pointer;">
                <div class="mermaid-diagram" id="mermaid-ultrathink-critical-paths" style="background:#0a0a0a;border:1px solid #3f3f46;border-radius:6px;padding:20px;min-height:300px;">
                  <div class="mermaid">flowchart TD</div>
                </div>
              </div>

              <div class="diagram-card" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;cursor:pointer;">
                <div class="mermaid-diagram" id="mermaid-ultrathink-component-clusters" style="background:#0a0a0a;border:1px solid #3f3f46;border-radius:6px;padding:20px;min-height:300px;">
                  <div class="mermaid">flowchart TD</div>
                </div>
              </div>

              <div class="diagram-card" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;cursor:pointer;">
                <div class="mermaid-diagram" id="mermaid-ultrathink-service-layers" style="background:#0a0a0a;border:1px solid #3f3f46;border-radius:6px;padding:20px;min-height:300px;">
                  <div class="mermaid">flowchart TD</div>
                </div>
              </div>

              <div class="diagram-card" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;cursor:pointer;">
                <div class="mermaid-diagram" id="mermaid-ultrathink-risk-analysis" style="background:#0a0a0a;border:1px solid #3f3f46;border-radius:6px;padding:20px;min-height:300px;">
                  <div class="mermaid">flowchart TD</div>
                </div>
              </div>

            </div>
          </div>

          <!-- FULLSCREEN PNG DISPLAY -->
          <div id="fullscreen-display" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);z-index:9999;overflow:hidden;">
            <div id="fullscreen-image-container" style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative;cursor:grab;">
              <img id="fullscreen-image" style="max-width:100%;max-height:100%;object-fit:contain;user-select:none;" />
              <button onclick="closeFullscreen()" style="position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.1);color:white;border:1px solid rgba(255,255,255,0.2);padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;">✕ Close</button>
            </div>
          </div>

  
          <!-- 🎯 DIAGRAM INTERACTIVE CONTROLS -->
          <div class="diagram-controls" style="background:linear-gradient(135deg, rgba(99,102,241,0.05) 0%, rgba(139,92,246,0.05) 100%);border:1px solid var(--accent);border-radius:12px;padding:12px;margin-bottom:32px;">
            <h4 style="font-size:18px;font-weight:600;color:var(--text);margin:0 0 16px 0;">🎯 Interactive Controls</h4>
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;">
              <button onclick="toggleAllDiagrams()" style="background:var(--accent);color:white;border:none;padding:12px 20px;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.2s;">
                👁️ Toggle All Diagrams
              </button>
              <button onclick="exportDiagrams()" style="background:var(--success);color:white;border:none;padding:12px 20px;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.2s;">
                📸 Export All
              </button>
              <button onclick="showDiagramHelp()" style="background:var(--surface-2);color:var(--text);border:1px solid var(--border);padding:12px 20px;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.2s;">
                ❓ Help
              </button>
            </div>
          </div>

          <!-- SIMPLE DIAGRAM SCRIPT -->
          <script>
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;

            function closeFullscreen() {
              document.getElementById('fullscreen-display').style.display = 'none';
              document.body.style.overflow = '';
            }

            function openFullscreen(imageSrc) {
              const fullscreenDiv = document.getElementById('fullscreen-display');
              const img = document.getElementById('fullscreen-image');
              img.src = imageSrc;
              fullscreenDiv.style.display = 'block';
              document.body.style.overflow = 'hidden';

              // Reset position and zoom
              const container = document.getElementById('fullscreen-image-container');
              container.style.transform = 'scale(1) translate(0px, 0px)';
              xOffset = 0;
              yOffset = 0;
            }

            function mermaidToPng(mermaidElement, callback) {
              if (typeof mermaid === 'undefined') {
                callback(null);
                return;
              }

              const mermaidCode = mermaidElement.textContent.trim();
              mermaid.render('temp-' + Date.now(), mermaidCode)
                .then(result => {
                  const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                  svgElement.innerHTML = result.svg;
                  svgElement.setAttribute('width', '800px');
                  svgElement.setAttribute('height', '600px');

                  const svgData = new XMLSerializer().serializeToString(svgElement);
                  const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
                  const svgUrl = URL.createObjectURL(svgBlob);

                  const img = new Image();
                  img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = 800;
                    canvas.height = 600;
                    const ctx = canvas.getContext('2d');

                    // Transparent background
                    ctx.clearRect(0, 0, 800, 600);

                    // Draw SVG
                    ctx.drawImage(img, 0, 0, 800, 600);

                    canvas.toBlob(function(pngBlob) {
                      const pngUrl = URL.createObjectURL(pngBlob);
                      callback(pngUrl);
                      URL.revokeObjectURL(svgUrl);
                    }, 'image/png');
                  };
                  img.src = svgUrl;
                })
                .catch(error => {
                  console.error('Mermaid rendering error:', error);
                  callback(null);
                });
            }

            // Set up event listeners when document is ready
            document.addEventListener('DOMContentLoaded', function() {
              // Add event listeners to all diagram cards
              const diagramCards = document.querySelectorAll('.diagram-card');
              diagramCards.forEach(card => {
                const mermaidDiv = card.querySelector('.mermaid');

                // Double click to open fullscreen
                card.addEventListener('dblclick', function(e) {
                  e.preventDefault();
                  mermaidToPng(mermaidDiv, function(pngUrl) {
                    if (pngUrl) {
                      openFullscreen(pngUrl);
                    }
                  });
                });

                // Right click to open fullscreen
                card.addEventListener('contextmenu', function(e) {
                  e.preventDefault();
                  mermaidToPng(mermaidDiv, function(pngUrl) {
                    if (pngUrl) {
                      openFullscreen(pngUrl);
                    }
                  });
                });

                // Prevent default drag behavior
                card.addEventListener('dragstart', function(e) {
                  e.preventDefault();
                });
              });

              // Fullscreen drag functionality
              const fullscreenContainer = document.getElementById('fullscreen-image-container');
              const fullscreenImg = document.getElementById('fullscreen-image');

              fullscreenContainer.addEventListener('mousedown', dragStart);
              document.addEventListener('mousemove', drag);
              document.addEventListener('mouseup', dragEnd);

              // Zoom with scroll
              fullscreenContainer.addEventListener('wheel', function(e) {
                e.preventDefault();
                const scale = e.deltaY < 0 ? 1.1 : 0.9;
                const currentTransform = fullscreenContainer.style.transform || 'scale(1) translate(0px, 0px)';
                const match = currentTransform.match(/scale\(([\d.]+)\)\s+translate\(([-\d.]+)px,\s*([-\d.]+)px\)/);

                if (match) {
                  const currentScale = parseFloat(match[1]);
                  const newScale = Math.min(Math.max(currentScale * scale, 0.1), 5);
                  fullscreenContainer.style.transform = `scale(${newScale}) translate(${xOffset}px, ${yOffset}px)`;
                }
              });

              // ESC to close
              document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                  closeFullscreen();
                }
              });
            });

            function dragStart(e) {
              const fullscreenContainer = document.getElementById('fullscreen-image-container');
              if (e.target === fullscreenContainer || e.target === fullscreenContainer.firstElementChild) {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
                isDragging = true;
                fullscreenContainer.style.cursor = 'grabbing';
              }
            }

            function drag(e) {
              if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
                xOffset = currentX;
                yOffset = currentY;

                const fullscreenContainer = document.getElementById('fullscreen-image-container');
                const currentTransform = fullscreenContainer.style.transform || 'scale(1) translate(0px, 0px)';
                const match = currentTransform.match(/scale\(([\d.]+)\)\s+translate\(([-\d.]+)px,\s*([-\d.]+)px\)/);

                if (match) {
                  const currentScale = match[1];
                  fullscreenContainer.style.transform = `scale(${currentScale}) translate(${currentX}px, ${currentY}px)`;
                }
              }
            }

            function dragEnd(e) {
              isDragging = false;
              const fullscreenContainer = document.getElementById('fullscreen-image-container');
              fullscreenContainer.style.cursor = 'grab';
            }
          </script>

          <!-- ♿ ACCESSIBILITY ENHANCEMENT STYLES -->
          <style>
            /* High Contrast Modes */
            body.contrast-high {
              --surface-1: #000000;
              --surface-2: #1a1a1a;
              --surface-3: #2a2a2a;
              --text: #ffffff;
              --text-secondary: #e0e0e0;
              --muted: #b0b0b0;
              --accent: #0066ff;
              --border: #404040;
              --black-20: rgba(255,255,255,0.2);
            }

            body.contrast-very-high {
              --surface-1: #000000;
              --surface-2: #000000;
              --surface-3: #1a1a1a;
              --text: #ffffff;
              --text-secondary: #ffffff;
              --muted: #ffffff;
              --accent: #ffff00;
              --border: #ffffff;
              --black-20: rgba(255,255,255,0.3);
            }

            /* Enhanced Focus Indicators */
            .enhanced-focus button:focus,
            .enhanced-focus input:focus,
            .enhanced-focus select:focus,
            .enhanced-focus [tabindex="0"]:focus {
              outline: 3px solid #6366f1 !important;
              outline-offset: 2px !important;
              box-shadow: 0 0 0 2px #1e293b !important;
            }

            /* Large Click Targets */
            .large-target {
              min-height: 44px !important;
              min-width: 44px !important;
              padding: 12px 20px !important;
              font-size: 16px !important;
            }

            /* Diagram Card Hover Effects */
            .diagram-card:hover {
              transform: translateY(-2px);
              box-shadow: 0 8px 25px rgba(0,0,0,0.3);
              border-color: var(--accent);
            }

            .diagram-card:focus {
              outline: 2px solid var(--accent);
              outline-offset: 2px;
            }

            /* Smooth Animations */
            .diagram-card,
            .fullscreen-hologram,
            .accessibility-panel {
              transition: all 0.3s ease;
            }

            /* Reduced Motion */
            @media (prefers-reduced-motion: reduce) {
              .diagram-card,
              .fullscreen-hologram,
              .accessibility-panel {
                transition: none !important;
              }
            }

            /* Screen Reader Only Text */
            .sr-only {
              position: absolute;
              width: 1px;
              height: 1px;
              padding: 0;
              margin: -1px;
              overflow: hidden;
              clip: rect(0, 0, 0, 0);
              white-space: nowrap;
              border: 0;
            }

            /* Keyboard Navigation Visual Cues */
            [tabindex="0"]:hover {
              cursor: pointer;
            }

            /* Hologram Container Accessibility */
            #fullscreen-hologram[aria-hidden="true"] {
              visibility: hidden;
            }

            #fullscreen-hologram[aria-hidden="false"] {
              visibility: visible;
            }

            /* Accessibility Panel Improvements */
            .accessibility-panel select:focus,
            .accessibility-panel input:focus {
              outline: 2px solid var(--accent);
              outline-offset: 2px;
            }

            .accessibility-section label {
              display: block;
              margin-bottom: 8px;
              font-weight: 500;
              cursor: pointer;
            }

            .accessibility-section label:hover {
              color: var(--accent);
            }
          </style>

          <!-- 🎯 ADVANCED ACTIONS -->
          <div class="dependency-actions" style="margin-top:20px;display:flex;gap:12px;flex-wrap:wrap;">
            <button onclick="copyMermaidCode()" style="background:var(--accent);color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 6px var(--black-20);font-size:13px;">
              📋 Copy Mermaid Code
            </button>
            <button onclick="exportFullAnalysis()" style="background:var(--warning);color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 6px var(--black-20);font-size:13px;">
              💾 Export Full Analysis
            </button>
            <button onclick="exportSniperData()" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 6px var(--black-20);font-size:13px;">
              🔫 Export Sniper Data
            </button>
            <button onclick="regenerateDependencyMap()" style="background:var(--muted);color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 6px var(--black-20);font-size:13px;">
              🔄 Regenerate Map
            </button>
            <button onclick="toggleRippleMode()" style="background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.2s;box-shadow:0 2px 6px var(--black-20);font-size:13px;">
              🌊 Toggle Ripple Mode
            </button>
          </div>

          <!-- 📊 DETAILED RECOMMENDATIONS -->
          <div class="dependency-recommendations" style="margin-top:20px;">
            <h4 style="margin-bottom:16px;color:var(--text);display:flex;align-items:center;gap:8px;">
              🎯 <span data-en="Strategic Recommendations" data-pt="Recomendações Estratégicas">Strategic Recommendations</span>
            </h4>
            <div class="recommendations-list" style="background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:16px;">
              <div class="space-y-4">
            <div class="border rounded-lg p-4 bg-green-100 border-green-300 text-green-800">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-800 text-white">
                            INFO
                        </span>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-semibold">Good Dependency Structure</h4>
                        <p class="text-sm mt-1 opacity-90">No major issues detected in dependency analysis</p>
                        <ul class="mt-2 text-sm space-y-1">
                            <li class="flex items-center"><span class="w-2 h-2 bg-current rounded-full mr-2"></span>Continue current practices</li><li class="flex items-center"><span class="w-2 h-2 bg-current rounded-full mr-2"></span>Regular dependency reviews</li>
                        </ul>
                    </div>
                </div>
            </div>
            </div>
            </div>
          </div>

          <!-- 🔍 ENTITY DETAILS SECTION -->
          <details style="margin-top:20px;border:1px solid var(--border);border-radius:8px;padding:0;">
            <summary style="cursor:pointer;font-size:16px;font-weight:600;padding:16px;margin-bottom:0;user-select:none;background:var(--surface-2);border-radius:8px 8px 0 0;" data-en="🔍 Detailed Entity Analysis (Click to expand)" data-pt="🔍 Análise Detalhada de Entidades (Clique para expandir)">
              🔍 Detailed Entity Analysis (Click to expand)
            </summary>
            <div style="padding:12px;">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white border rounded-lg overflow-hidden">
                <div class="bg-gray-50 px-4 py-3 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="font-semibold text-sm truncate" title="/private/tmp/test_project/test.js">
                            test.js
                        </h3>
                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
                            0 entities
                        </span>
                    </div>
                </div>

                <div class="p-4 space-y-3">
            </div></div><div class="col-span-full text-center py-8 text-gray-600">No entities detected in source files</div></div>
            </div>
          </details>
        </section>
        
  <details class="card" style="border:1px solid var(--border);border-radius:8px;padding:12px">
    <summary style="cursor:pointer;font-size:18px;font-weight:600;margin-bottom:16px;user-select:none" data-en="📊 Project Health Details - Click to expand" data-pt="📊 Detalhes de Saúde - Clique para expandir">📊 Project Health Details</summary>
    <div class="grid cols-3">
      <div class="callout"><strong data-en="Duplicates:" data-pt="Duplicados:">Duplicates:</strong> <span class="status-success">0 sets (0.0 MB wasted)</span></div>
      <div class="callout"><strong data-en="Empty Dirs:" data-pt="Dirs Vazios:">Empty Dirs:</strong> <span class="status-success">0</span></div>
      <div class="callout"><strong data-en="Unknown Dirs:" data-pt="Dirs Desconhecidos:">Unknown Dirs:</strong> <span class="status-success">0 (0.0%)</span></div>
    </div>
    <div class="callout" style="margin-top:12px"><strong data-en="Tech Stack:" data-pt="Stack Tecnológico:">Tech Stack:</strong> N/A</div>
  </details>

        <section class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
            <div>
              <h2 style="margin:0" data-en="🎯 What To Do Now - Action Plan" data-pt="🎯 O Que Fazer Agora - Plano de Ação">🎯 What To Do Now - Action Plan</h2>
              <p class="small" style="margin:4px 0 0" data-en="AI-agent ready instructions with copy-paste buttons" data-pt="Instruções prontas para IA com botões de copiar">AI-agent ready instructions with copy-paste buttons</p>
            </div>
            <button onclick="copyMasterInstructions()" style="background:var(--accent);color:white;border:none;padding:12px 20px;border-radius:8px;font-weight:600;cursor:pointer;font-size:14px;transition:all 0.2s;box-shadow:0 4px 12px var(--black-40)" onmouseover="this.style.transform='scale(1.05)';this.style.boxShadow='0 6px 16px var(--black-50)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='0 4px 12px var(--black-40)'">
              <span data-en="🎯 Copy Complete Agent Instructions" data-pt="🎯 Copiar Instruções Completas">🎯 Copy Complete Agent Instructions</span>
            </button>
          </div>
        
          <details style="margin-top:24px;border:1px solid var(--border);border-left:3px solid var(--warning);border-radius:8px;padding:16px;background:var(--surface-2)">
            <summary style="cursor:pointer;font-size:18px;font-weight:600;color:var(--warning)" data-en="⚡ P1: High Priority (1-2 days) - Click to expand" data-pt="⚡ P1: Alta Prioridade (1-2 dias) - Clique para expandir">⚡ P1: High Priority (1-2 days) - Click to expand</summary>
            <div style="color:var(--muted);font-size:13px;margin-top:8px" data-en="Important improvements for project health" data-pt="Melhorias importantes para saúde do projeto">Important improvements for project health</div>
            <div style="margin-top:20px">
            
            <div class="callout" style="border-left:4px solid var(--warning);background:var(--surface);padding:12px;margin-top:16px;border-radius:8px">
              <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
                <div style="border:1px solid var(--warning);color:var(--warning);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0;opacity:0.8">1</div>
                <div style="font-weight:600;font-size:18px;line-height:1.3"><span data-en="Setup appropriate testing framework testing" data-pt="Configurar testes com appropriate testing framework">Setup appropriate testing framework testing</span></div>
              </div>
              <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:8px">
                <span style="background:var(--surface);padding:6px 12px;border-radius:6px;font-size:13px;border:1px solid var(--border)">⏱️ 1-2 days</span>
                <span style="background:var(--surface);padding:6px 12px;border-radius:6px;font-size:13px;font-weight:600;border:1px solid var(--warning);color:var(--warning);opacity:0.9">📊 CRITICAL</span>
              </div>
              <div style="color:var(--muted);line-height:1.6;font-size:14px">💡 <span data-en="Prevents bugs, enables safe refactoring" data-pt="Previne bugs, permite refatoração segura">Prevents bugs, enables safe refactoring</span></div>
              
              <div class="mono" style="background:var(--bg);color:var(--text);border:1px solid var(--border);padding:12px 16px;border-radius:6px;font-size:13px;margin-top:12px;white-space:pre-wrap;overflow-x:auto;line-height:1.6;font-family:var(--mono)"># Install testing framework for your tech stack
# mkdir tests
# Create first test file</div>
                    
            </div>
                </div></details>
          <details style="margin-top:24px;border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:8px;padding:16px;background:var(--surface-2)">
            <summary style="cursor:pointer;font-size:18px;font-weight:600;color:var(--accent)" data-en="🎯 P2: Strategic (1+ weeks) - Click to expand" data-pt="🎯 P2: Estratégico (1+ semanas) - Clique para expandir">🎯 P2: Strategic (1+ weeks) - Click to expand</summary>
            <div style="margin-top:20px">
            
            <div class="callout" style="border-left:4px solid var(--accent);background:var(--surface);padding:12px;margin-top:16px;border-radius:8px">
              <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
                <div style="border:1px solid var(--accent);color:var(--accent);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0;opacity:0.8">1</div>
                <div style="font-weight:600;font-size:18px;line-height:1.3"><span data-en="Add 5 documentation files (current: 0)" data-pt="Adicionar 5 arquivos de documentação (atual: 0)">Add 5 documentation files (current: 0)</span></div>
              </div>
              <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:8px">
                <span style="background:var(--surface);padding:6px 12px;border-radius:6px;font-size:13px;border:1px solid var(--border)">⏱️ 1-2 weeks</span>
                <span style="background:var(--surface);padding:6px 12px;border-radius:6px;font-size:13px;font-weight:600;border:1px solid var(--accent);color:var(--accent);opacity:0.9">📊 LOW</span>
              </div>
              <div style="color:var(--muted);line-height:1.6;font-size:14px">💡 <span data-en="Increases documentation from 0 to 5 files" data-pt="Aumenta documentação de 0 para 5 arquivos">Increases documentation from 0 to 5 files</span></div>
              
              <div class="mono" style="background:var(--bg);color:var(--text);border:1px solid var(--border);padding:12px 16px;border-radius:6px;font-size:13px;margin-top:12px;white-space:pre-wrap;overflow-x:auto;line-height:1.6;font-family:var(--mono)"># Create essential documentation
touch README.md CONTRIBUTING.md CHANGELOG.md
mkdir docs && touch docs/ARCHITECTURE.md docs/API.md</div>
                    
            </div>
                </div></details></section>

        <section class="card">
          <h2 data-en="🤖 AI-Powered Purpose Analysis" data-pt="🤖 Análise de Propósito com IA">🤖 AI-Powered Purpose Analysis</h2>
          <div class="callout" style="background:var(--surface);border:1px solid var(--warning);border-left:4px solid var(--warning)">
            <p><strong data-en="⚠️ AI Analysis Not Available" data-pt="⚠️ Análise de IA Não Disponível">⚠️ AI Analysis Not Available</strong></p>
            <p class="small" data-en="GPT-5 insights require Doppler configuration with OpenAI API key." data-pt="Insights do GPT-5 requerem configuração do Doppler com chave da API OpenAI.">GPT-5 insights require Doppler configuration with OpenAI API key.</p>
            <ol style="margin:8px 0 0 16px;font-size:12px">
              <li>Install Doppler: <code class="mono">brew install doppler</code></li>
              <li>Configure API key: <code class="mono">doppler secrets set OPENAI_API_KEY="your-key" --project ai-tools --config dev</code></li>
              <li>Re-run analysis to get AI-powered insights</li>
            </ol>
            <p class="small" style="margin-top:8px"><strong data-en="Why enable this?" data-pt="Por que habilitar?">Why enable this?</strong> <span data-en="Get deep PURPOSE-DRIVEN insights about your project's meta-purpose, hidden patterns, and smart recommendations." data-pt="Obtenha insights ORIENTADOS A PROPÓSITO sobre o meta-propósito do seu projeto, padrões ocultos e recomendações inteligentes.">Get deep PURPOSE-DRIVEN insights about your project's meta-purpose, hidden patterns, and smart recommendations.</span></p>
          </div>
        </section>
        

        <details style="margin-bottom:24px;border:1px solid var(--border);border-radius:8px;background:var(--surface)">
          <summary style="padding:12px 16px;background:var(--surface-2);border-radius:8px;font-weight:600;cursor:pointer;user-select:none;font-size:14px;color:var(--text-primary)">
            🎨 <span data-en="OKLCH Color System Reference" data-pt="Referência do Sistema de Cores OKLCH">OKLCH Color System Reference</span>
            <span style="float:right;font-size:12px;color:var(--muted)" data-en="(Click to expand)" data-pt="(Clique para expandir)">(Click to expand)</span>
          </summary>
          <div style="padding:16px">
        
            <div style="text-align:center;padding:12px;background:var(--surface-2);border-radius:6px;margin-bottom:16px">
              <span style="font-size:24px;font-weight:700;color:var(--accent)">23</span>
              <span style="font-size:13px;color:var(--muted);margin-left:8px" data-en="CSS Variables" data-pt="Variáveis CSS">CSS Variables</span>
            </div>
        
            <div style="margin-bottom:16px">
              <div style="font-size:12px;font-weight:700;color:var(--text-primary);margin-bottom:8px">Base (7)</div>
              <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px">
            
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.96 0.01 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--bg</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(1 0.01 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--surface</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.98 0.01 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--surface-2</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.15 0.02 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--text</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.45 0.02 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--muted</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.85 0.02 250);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--border</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(0.65 0.08 240);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--accent</div>
                  </div>
                </div>
                
              </div>
            </div>
            
            <div style="margin-bottom:16px">
              <div style="font-size:12px;font-weight:700;color:var(--text-primary);margin-bottom:8px">Temperature (6)</div>
              <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px">
            
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(38% 0.19 265);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-cold</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(63% 0.23 255);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-cool</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(73% 0.15 166);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-neutral</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(72% 0.17 75);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-warm</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(62% 0.26 25);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-hot</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(58% 0.26 25);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--temp-very-hot</div>
                  </div>
                </div>
                
              </div>
            </div>
            
            <div style="margin-bottom:16px">
              <div style="font-size:12px;font-weight:700;color:var(--text-primary);margin-bottom:8px">GitHub (5)</div>
              <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px">
            
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(13% 0.01 260);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--github-none</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(27% 0.08 152);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--github-low</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(44% 0.13 155);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--github-med</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(65% 0.18 150);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--github-high</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(75% 0.20 145);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--github-max</div>
                  </div>
                </div>
                
              </div>
            </div>
            
            <div style="margin-bottom:16px">
              <div style="font-size:12px;font-weight:700;color:var(--text-primary);margin-bottom:8px">Plasma (5)</div>
              <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px">
            
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(25% 0.14 300);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--plasma-min</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(48% 0.10 240);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--plasma-low</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(70% 0.16 155);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--plasma-med</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(95% 0.16 100);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--plasma-high</div>
                  </div>
                </div>
                
                <div style="display:flex;align-items:center;gap:8px;background:var(--surface-2);padding:6px 8px;border-radius:4px;border:1px solid var(--border)">
                  <div style="width:24px;height:24px;background:oklch(98% 0.08 105);border-radius:3px;border:1px solid var(--border);flex-shrink:0"></div>
                  <div style="min-width:0;flex:1">
                    <div class="mono" style="font-size:10px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis">--plasma-max</div>
                  </div>
                </div>
                
              </div>
            </div>
            
            <div style="margin-top:16px;padding:12px;background:var(--surface-2);border-radius:6px;border-left:3px solid var(--accent)">
              <div style="font-size:11px;color:var(--muted)" data-en="💡 OKLCH = Lightness, Chroma, Hue (perceptually uniform color space)" data-pt="💡 OKLCH = Luminosidade, Croma, Matiz (espaço de cores perceptualmente uniforme)">
                💡 OKLCH = Lightness, Chroma, Hue (perceptually uniform color space)
              </div>
            </div>
          </div>
        </details>
        
</div>
<script>
// ═══════════════════════════════════════════════════════════════════════════
// 🗼 MEGALITH LIGHTHOUSE NAVIGATION SYSTEM
// ═══════════════════════════════════════════════════════════════════════════

// 📚 Navigation Functions for MEGALITH INDEX
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    // Highlight the section temporarily
    element.style.transition = 'background-color 0.3s';
    element.style.backgroundColor = 'var(--accent)';
    element.style.color = 'white';
    setTimeout(() => {
      element.style.backgroundColor = '';
      element.style.color = '';
    }, 1000);
  }
}

function expandAllSections() {
  const details = document.querySelectorAll('details');
  details.forEach(detail => detail.open = true);
}

function collapseAllSections() {
  const details = document.querySelectorAll('details');
  details.forEach(detail => detail.open = false);
}

// ═══════════════════════════════════════════════════════════════════════════
// 🌐 LANGUAGE & THEME SYSTEM - Enhanced with Smooth Transitions
// ═══════════════════════════════════════════════════════════════════════════

// 🛡️ DIAGNOSTIC & ERROR HANDLING SYSTEM
const Diagnostics = {
  enabled: true,
  log(category, message, data) {
    if (this.enabled) console.log(`[${category}] ${message}`, data || '');
  },
  error(category, message, error) {
    console.error(`[${category}] ❌ ${message}`, error);
  },
  test(name, condition, failMsg) {
    const passed = typeof condition === 'function' ? condition() : condition;
    if (passed) {
      console.log(`✅ ${name}`);
    } else {
      console.error(`❌ ${name}: ${failMsg || 'Failed'}`);
    }
    return passed;
  }
};

// Safe localStorage access
const SafeStorage = {
  get(key, defaultValue) {
    try {
      return localStorage.getItem(key) || defaultValue;
    } catch(e) {
      Diagnostics.error('Storage', 'localStorage.getItem failed', e);
      return defaultValue;
    }
  },
  set(key, value) {
    try {
      localStorage.setItem(key, value);
      return true;
    } catch(e) {
      Diagnostics.error('Storage', 'localStorage.setItem failed', e);
      return false;
    }
  }
};

let currentLang = SafeStorage.get('preferred-lang', 'en');
let currentTheme = SafeStorage.get('preferred-theme', 'dark');

// Apply language instantly (no animation, no notification)
function applyLanguage(lang) {
  document.querySelectorAll('[data-en]').forEach(el => {
    el.textContent = lang === 'pt' ? el.getAttribute('data-pt') : el.getAttribute('data-en');
  });
  currentLang = lang;
}

// Apply theme instantly (no animation, no notification)
function applyTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  currentTheme = theme;
}

// Update button labels to show current state
function updateButtonLabels() {
  const themeBtn = document.getElementById('theme-toggle-btn');
  const langBtn = document.getElementById('lang-toggle-btn');
  
  if (themeBtn) {
    themeBtn.textContent = currentTheme === 'dark' ? '🌙 Dark' : '☀️ Light';
    themeBtn.style.background = currentTheme === 'dark' ? 'oklch(20% 0.01 264)' : 'oklch(98% 0.01 100)';
    themeBtn.style.color = currentTheme === 'dark' ? 'oklch(95% 0.008 264)' : 'oklch(15% 0.008 100)';
  }
  
  if (langBtn) {
    langBtn.textContent = currentLang === 'en' ? '🌐 EN' : '🌐 PT';
  }
}

// Toggle language - INSTANT with button state feedback
function toggleLanguage() {
  const newLang = currentLang === 'en' ? 'pt' : 'en';
  applyLanguage(newLang);
  localStorage.setItem('preferred-lang', newLang);
  updateButtonLabels();  // Update button to show new state
}

// Toggle theme - INSTANT with button state feedback
function toggleTheme() {
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  applyTheme(newTheme);
  localStorage.setItem('preferred-theme', newTheme);
  updateButtonLabels();  // Update button to show new state
}

// Apply saved settings on page load
document.addEventListener('DOMContentLoaded', function() {
  Diagnostics.log('Init', '🚀 Initializing HTML Report...');
  
  // Test 1: Core functions exist
  Diagnostics.test('applyLanguage exists', typeof applyLanguage === 'function');
  Diagnostics.test('applyTheme exists', typeof applyTheme === 'function');
  
  // Apply saved settings
  applyLanguage(currentLang);
  applyTheme(currentTheme);
  updateButtonLabels();
  
  // Test 2: Settings panel
  const settingsPanel = document.getElementById('settings-panel');
  Diagnostics.test('Settings panel exists', settingsPanel !== null);
  
  // Initialize settings panel active states
  const savedSchema = SafeStorage.get('calendarColorSchema', 'temperature');
  Diagnostics.log('ColorSchema', 'Loaded saved schema:', savedSchema);
  
  if (typeof updateSchemaButtons === 'function') {
    updateSchemaButtons(savedSchema);
  }
  
  document.getElementById('lang-' + currentLang)?.classList.add('active');
  document.getElementById('theme-' + currentTheme)?.classList.add('active');
  
  // Test 3: Calendar elements
  const calendarDays = document.querySelectorAll('.calendar-day');
  Diagnostics.test('Calendar days rendered', calendarDays.length > 0, `Found ${calendarDays.length} days`);
  if (calendarDays.length > 0) {
    const firstDay = calendarDays[0];
    Diagnostics.log('Calendar', 'First day background:', getComputedStyle(firstDay).background);
  }
  
  // Test 4: File explorers
  const fileExplorers = document.querySelectorAll('[data-en="Files Edited in This Session"]');
  Diagnostics.log('FileExplorer', `Found ${fileExplorers.length} file explorer sections`);
  
  Diagnostics.log('Init', '✅ Initialization complete');
});

// ═══════════════════════════════════════════════════════════════════════════
// ⚙️ SETTINGS PANEL SYSTEM
// ═══════════════════════════════════════════════════════════════════════════

// 🎨 COLOR SCHEMA SWITCHER (Early declaration for settings panel buttons)
// This stub will be replaced by the full implementation later in the script
window.pendingSchemaChange = null;
function switchColorSchema(schemaName) {
  // Store pending change
  window.pendingSchemaChange = schemaName;
  Diagnostics.log('ColorSchema', '⏳ Schema change queued:', schemaName);
  
  // Try to apply immediately if function exists
  if (typeof window.applyColorSchemaAnimated === 'function') {
    window.applyColorSchemaAnimated(schemaName);
  } else {
    // Will be applied when full system loads
    Diagnostics.log('ColorSchema', '⏸️  Waiting for color system to load...');
  }
}

// Toggle settings panel open/close
function toggleSettings() {
  const panel = document.getElementById('settings-panel');
  panel.classList.toggle('open');
}

// Close settings panel
function closeSettings() {
  const panel = document.getElementById('settings-panel');
  panel.classList.remove('open');
}

// Click outside to close panel
document.addEventListener('click', (e) => {
  const root = document.getElementById('settings-root');
  const panel = document.getElementById('settings-panel');
  if (root && !root.contains(e.target) && panel?.classList.contains('open')) {
    closeSettings();
  }
});

// Language selection from settings panel
function selectLang(lang) {
  applyLanguage(lang);
  localStorage.setItem('preferred-lang', lang);
  currentLang = lang;
  
  // Update active states
  document.querySelectorAll('[id^="lang-"]').forEach(btn => btn.classList.remove('active'));
  document.getElementById('lang-' + lang)?.classList.add('active');
}

// Theme selection from settings panel
function selectTheme(theme) {
  applyTheme(theme);
  localStorage.setItem('preferred-theme', theme);
  currentTheme = theme;
  
  // Update active states
  document.querySelectorAll('[id^="theme-"]').forEach(btn => btn.classList.remove('active'));
  document.getElementById('theme-' + theme)?.classList.add('active');
}

// Update schema button active states
function updateSchemaButtons(schema) {
  document.querySelectorAll('.schema-btn').forEach(btn => btn.classList.remove('active'));
  const schemaPrefix = schema.substring(0, 4);
  document.getElementById('schema-' + schemaPrefix)?.classList.add('active');
}

// ═══════════════════════════════════════════════════════════════════════════
// 🤖 AI AGENT INSTRUCTION GENERATOR - LLM-ORIENTED COPY-PASTE SYSTEM
// ═══════════════════════════════════════════════════════════════════════════

// Copy individual action instructions (fine-grained task)
async function copyActionInstructions(actionElement) {
  try {
    const priority = actionElement.dataset.priority;
    const title = actionElement.dataset.title;
    const effort = actionElement.dataset.effort;
    const impact = actionElement.dataset.impact;
    const benefit = actionElement.dataset.benefit;
    const command = actionElement.dataset.command.replace(/&quot;/g, '\"');
    
    const prompt = `# TASK: ${title}

## CONTEXT
- Priority: ${priority} (${priority === 'P0' ? 'Quick Win' : priority === 'P1' ? 'High Priority' : 'Strategic'})\n- Time: ${effort}
- Impact: ${impact}
- Benefit: ${benefit}

## OBJECTIVE
${title}

## COMMANDS TO EXECUTE
\`\`\`bash
${command}
\`\`\`

## SUCCESS CRITERIA
- [ ] Command executed without errors
- [ ] Changes verified manually
- [ ] Project state improved as expected

## DEFINITION OF DONE
Re-run analysis and verify the issue is resolved.

## SAFETY CHECKLIST
- [ ] Reviewed what files/folders will be affected
- [ ] Backed up critical data if needed
- [ ] Tested command in safe environment first
- [ ] Ready to execute with confidence
`;

    await navigator.clipboard.writeText(prompt);
    showCopyNotification('Action copied! Paste to your AI agent.');
  } catch (error) {
    Diagnostics.error('Clipboard', 'Copy failed', error);
    alert('Copy failed. Please select and copy manually.');
  }
}

// Copy complete master instructions (all actions as structured task list)
async function copyMasterInstructions() {
  try {
    const allActions = document.querySelectorAll('.action-item');
    const projectName = document.querySelector('header div').textContent;
    const healthScore = document.querySelector('.metric-value').textContent;
    
    let prompt = `# COMPLETE PROJECT REMEDIATION INSTRUCTIONS FOR AI AGENT

## PROJECT CONTEXT
- Project: ${projectName}
- Current Health Score: ${healthScore}
- Target: 85.0/100
- Gap: Need significant improvement
- Generated: ${new Date().toISOString()}

## EXECUTIVE SUMMARY
This project needs remediation across multiple areas. The tasks below are prioritized
by impact and effort. Complete P0 tasks first for quick wins, then proceed to P1 and P2.

## COMPLETE TASK LIST
\n`;

    // Collect all actions by priority
    const p0Actions = [];
    const p1Actions = [];
    const p2Actions = [];

    allActions.forEach((action, index) => {
      const priority = action.dataset.priority;
      const actionData = {
        number: index + 1,
        title: action.dataset.title,
        effort: action.dataset.effort,
        impact: action.dataset.impact,
        benefit: action.dataset.benefit,
        command: action.dataset.command.replace(/&quot;/g, '\"')
      };

      if (priority === 'P0') p0Actions.push(actionData);
      else if (priority === 'P1') p1Actions.push(actionData);
      else if (priority === 'P2') p2Actions.push(actionData);
    });

    // Generate P0 section
    if (p0Actions.length > 0) {
      prompt += `### P0: QUICK WINS (Execute First - 15-30 min each)\n\n`;
      p0Actions.forEach((action, i) => {
        prompt += `- [ ] **Task P0-${i+1}:** ${action.title}\n`;
        prompt += `      \n`;
        prompt += `      **Time:** ${action.effort} | **Impact:** ${action.impact}\n`;
        prompt += `      **Benefit:** ${action.benefit}\n`;
        prompt += `      \n`;
        prompt += `      **Commands:**\n`;
        prompt += `      \`\`\`bash\n`;
        prompt += `      ${action.command}\n`;
        prompt += `      \`\`\`\n`;
        prompt += `      \n`;
        prompt += `      **Success Criteria:**\n`;
        prompt += `      - [ ] Command executed successfully\n`;
        prompt += `      - [ ] Changes verified\n`;
        prompt += `      - [ ] No unintended side effects\n`;
        prompt += `      \n`;
      });
      prompt += `\n`;
    }

    // Generate P1 section
    if (p1Actions.length > 0) {
      prompt += `### P1: HIGH PRIORITY (Complete This Week - 1-2 days each)\n\n`;
      p1Actions.forEach((action, i) => {
        prompt += `- [ ] **Task P1-${i+1}:** ${action.title}\n`;
        prompt += `      **Time:** ${action.effort} | **Impact:** ${action.impact}\n`;
        prompt += `      **Benefit:** ${action.benefit}\n`;
        if (action.command) {
          prompt += `      **Commands:** \`${action.command.substring(0, 50)}...\`\n`;
        }
        prompt += `      \n`;
      });
      prompt += `\n`;
    }

    // Generate P2 section
    if (p2Actions.length > 0) {
      prompt += `### P2: STRATEGIC (Plan for Next Month - 1+ weeks each)\n\n`;
      p2Actions.forEach((action, i) => {
        prompt += `- [ ] **Task P2-${i+1}:** ${action.title}\n`;
        prompt += `      **Benefit:** ${action.benefit}\n`;
        prompt += `      \n`;
      });
    }

    prompt += `\n## EXECUTION GUIDELINES\n\n`;
    prompt += `1. **Start with P0** - Quick wins build momentum\n`;
    prompt += `2. **Verify each task** - Check success criteria before moving on\n`;
    prompt += `3. **Re-run analysis** - After P0 completion to see score improvement\n`;
    prompt += `4. **Document changes** - Keep track of what was modified\n`;
    prompt += `5. **Test thoroughly** - Ensure no regressions introduced\n`;
    prompt += `\n`;
    prompt += `## FINAL VALIDATION\n\n`;
    prompt += `After completing all tasks, re-run the project analysis:\n`;
    prompt += `\`\`\`bash\n`;
    prompt += `python3 mr-fix-my-project-please.py .\n`;
    prompt += `\`\`\`\n`;
    prompt += `\n`;
    prompt += `Expected: Health score ≥ 85.0/100\n`;

    await navigator.clipboard.writeText(prompt);
    showCopyNotification(`✅ Complete task list copied! (${allActions.length} actions)`);
  } catch (error) {
    Diagnostics.error('Clipboard', 'Master copy failed', error);
    alert('Copy failed. Please try again or copy manually.');
  }
}

// Show copy notification
function showCopyNotification(message) {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 24px;
    background: var(--success);
    color: white;
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    box-shadow: 0 8px 24px var(--black-50);
    z-index: 10000;
    animation: slideIn 0.3s ease-out;
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.style.animation = 'slideOut 0.3s ease-in';
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

// Dependency Map Functions
function copyMermaidCode() {
  try {
    const mermaidContainer = document.querySelector('#dependency-mermaid');
    if (mermaidContainer) {
      const mermaidCode = mermaidContainer.textContent.trim();
      navigator.clipboard.writeText(mermaidCode);
      showCopyNotification('✅ Mermaid code copied to clipboard!');
    }
  } catch (error) {
    console.error('Failed to copy Mermaid code:', error);
    alert('Failed to copy Mermaid code. Please try again.');
  }
}

function exportDependencyMap() {
  try {
    const mermaidContainer = document.querySelector('#dependency-mermaid');
    const statsCards = document.querySelectorAll('.dependency-stats .stat-card');
    
    let exportContent = '# Dependency Analysis Export\n\n';
    
    // Add statistics
    if (statsCards.length > 0) {
      exportContent += '## Statistics\n\n';
      statsCards.forEach(card => {
        const value = card.querySelector('div:first-child').textContent;
        const label = card.querySelector('div:last-child').textContent;
        exportContent += `- **${label}**: ${value}\n`;
      });
      exportContent += '\n';
    }
    
    // Add Mermaid diagram
    if (mermaidContainer) {
      exportContent += '## Mermaid Dependency Diagram\n\n```mermaid\n';
      exportContent += mermaidContainer.textContent.trim();
      exportContent += '\n```\n';
    }
    
    // Add recommendations
    const recommendations = document.querySelectorAll('.recommendation');
    if (recommendations.length > 0) {
      exportContent += '\n## Recommendations\n\n';
      recommendations.forEach((rec, index) => {
        exportContent += `${index + 1}. ${rec.textContent.trim()}\n`;
      });
    }
    
    // Create and download file
    const blob = new Blob([exportContent], { type: 'text/markdown' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'dependency-analysis.md';
    a.click();
    URL.revokeObjectURL(url);
    
    showCopyNotification('✅ Dependency analysis exported!');
  } catch (error) {
    console.error('Failed to export dependency map:', error);
    alert('Failed to export dependency map. Please try again.');
  }
}

function regenerateDependencyMap() {
  try {
    // Reload the page to regenerate the dependency map
    window.location.reload();
  } catch (error) {
    console.error('Failed to regenerate dependency map:', error);
    alert('Failed to regenerate dependency map. Please refresh the page.');
  }
}

// Initialize Mermaid when page loads
document.addEventListener('DOMContentLoaded', function() {
  // Check if Mermaid is available
  if (typeof mermaid !== 'undefined') {
    try {
      mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',  // 🌙 DARK THEME FOR MAXIMUM READABILITY
        themeVariables: {
          // 🎯 HIGH CONTRAST DARK THEME
          darkMode: true,
          background: '#0a0a0a',  // Deep black background
          primaryColor: '#3b82f6',  // Bright blue (high contrast)
          primaryTextColor: '#ffffff',  // Pure white text
          primaryBorderColor: '#1e3a8a',  // Dark blue border
          lineColor: '#94a3b8',  // Light gray lines
          secondaryColor: '#10b981',  // Bright green
          tertiaryColor: '#8b5cf6',  // Bright purple
          mainBkg: '#1a1a1a',  // Dark node background
          secondBkg: '#262626',  // Slightly lighter
          textColor: '#f8fafc',  // Almost white text
          border1: '#475569',  // Medium gray borders
          border2: '#334155',  // Darker gray borders
          nodeBorder: '#64748b',  // Light gray node borders
          clusterBkg: '#171717',  // Very dark clusters
          clusterBorder: '#3f3f46',  // Cluster borders
          defaultLinkColor: '#94a3b8',  // Light gray links
          titleColor: '#f1f5f9',  // Light title
          edgeLabelBackground: '#262626',  // Dark edge labels
          nodeTextColor: '#f8fafc'  // White node text
        },
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis',
          padding: 20  // Add padding for readability
        }
      });
      console.log('Mermaid initialized successfully with DARK THEME');
    } catch (error) {
      console.error('Failed to initialize Mermaid:', error);
    }
  } else {
    console.warn('Mermaid library not found');
  }
});

// 🔍 RIGHT-CLICK ZOOM MODE FOR MERMAID DIAGRAMS
document.addEventListener('DOMContentLoaded', function() {
  const diagramContainers = document.querySelectorAll('.diagram-container');
  
  diagramContainers.forEach(container => {
    const mermaidDiv = container.querySelector('.mermaid');
    if (!mermaidDiv) return;
    
    let zoomEnabled = false;
    let currentZoom = 1;
    let isPanning = false;
    let startX = 0;
    let startY = 0;
    let translateX = 0;
    let translateY = 0;
    
    // Store original cursor and overflow
    const originalCursor = container.style.cursor;
    const originalOverflow = container.style.overflow;
    
    // Right-click to toggle zoom mode
    container.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      zoomEnabled = !zoomEnabled;
      
      if (zoomEnabled) {
        // ENABLE ZOOM MODE
        container.style.cursor = 'zoom-in';
        container.style.overflow = 'hidden';
        container.style.position = 'relative';
        mermaidDiv.style.transformOrigin = 'center center';
        mermaidDiv.style.transition = 'transform 0.2s ease-out';
        
        // Add or update visual indicator
        let indicator = container.querySelector('.zoom-indicator');
        if (!indicator) {
          indicator = document.createElement('div');
          indicator.className = 'zoom-indicator';
          indicator.style.cssText = `
            position: absolute;
            top: 8px;
            right: 8px;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          `;
          container.appendChild(indicator);
        }
        
        // Update indicator text and color
        indicator.innerHTML = '🔍 ZOOM MODE ACTIVE at ' + currentZoom.toFixed(1) + 'x (Scroll to zoom, right-click to lock)';
        indicator.style.background = 'rgba(59, 130, 246, 0.95)';  // Blue for active
        
        console.log('Zoom mode ENABLED for diagram at ' + currentZoom + 'x');
      } else {
        // DISABLE ZOOM MODE - BUT KEEP ZOOM LEVEL!
        container.style.cursor = originalCursor;
        container.style.overflow = originalOverflow;
        // ⚡ DON'T RESET ZOOM - KEEP IT LOCKED!
        // mermaidDiv.style.transform stays as-is
        
        // Update visual indicator to show locked state
        const indicator = container.querySelector('.zoom-indicator');
        if (indicator) {
          indicator.innerHTML = '🔒 ZOOM LOCKED at ' + currentZoom.toFixed(1) + 'x (Right-click to unlock)';
          indicator.style.background = 'rgba(16, 185, 129, 0.95)';  // Green for locked
        }
        
        console.log('Zoom mode DISABLED - Zoom LOCKED at ' + currentZoom + 'x');
      }
    });
    
    // Scroll to zoom when hover + zoom mode enabled
    container.addEventListener('wheel', (e) => {
      if (!zoomEnabled) return;
      
      e.preventDefault();
      e.stopPropagation();
      
      const delta = e.deltaY > 0 ? -0.1 : 0.1;
      currentZoom = Math.max(0.5, Math.min(5, currentZoom + delta));
      
      updateTransform();
      
      // Update cursor based on zoom level
      container.style.cursor = currentZoom > 1 ? 'zoom-out' : 'zoom-in';
      
      // Update indicator with current zoom level
      const indicator = container.querySelector('.zoom-indicator');
      if (indicator && zoomEnabled) {
        indicator.innerHTML = '🔍 ZOOM MODE ACTIVE at ' + currentZoom.toFixed(1) + 'x (Scroll to zoom, right-click to lock)';
      }
    }, { passive: false });
    
    // Pan with mouse drag when zoomed
    container.addEventListener('mousedown', (e) => {
      if (!zoomEnabled || currentZoom <= 1) return;
      
      isPanning = true;
      startX = e.clientX - translateX;
      startY = e.clientY - translateY;
      container.style.cursor = 'grabbing';
      e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
      if (!isPanning) return;
      
      translateX = e.clientX - startX;
      translateY = e.clientY - startY;
      updateTransform();
    });
    
    document.addEventListener('mouseup', () => {
      if (isPanning) {
        isPanning = false;
        container.style.cursor = currentZoom > 1 ? 'zoom-out' : 'zoom-in';
      }
    });
    
    function updateTransform() {
      mermaidDiv.style.transform = `scale(${currentZoom}) translate(${translateX/currentZoom}px, ${translateY/currentZoom}px)`;
    }
  });
  
  console.log('🔍 Right-click zoom mode initialized for all Mermaid diagrams');
});

</script>
</div>
</body>
</html>